<mxfile host="app.diagrams.net" modified="2024-07-10T11:16:22.079Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36" etag="zTAhMjNSJndh3juRUdFv" version="24.6.4" type="github">
  <diagram name="第 1 页" id="ozlCW-Ee5-HFpllsYa1k">
    <mxGraphModel dx="211" dy="489" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-150" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E5CCFF;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1340" y="640" width="300" height="450" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-34" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FF99CC;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1086" y="62.5" width="500" height="420" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-30" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#CCCC00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="896" y="62.5" width="150" height="200" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-40" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-31" target="L0zeIL_IlN0LuXFVjX9a-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-31" value="ThreadLocal&lt;div&gt;Ref&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="966" y="120" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-64" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-32" target="L0zeIL_IlN0LuXFVjX9a-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-32" value="CurrentThread&lt;div&gt;Ref&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="961" y="207.5" width="85" height="35" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-35" value="ThreadLocal实例1" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1106" y="90" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-36" value="var1 = new ThreadLocal(INIT_V)" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#99FFCC;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="907" y="82.5" width="115" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-37" value="new Thread.run()" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="907" y="182.5" width="107" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-41" value="ThreadLocal实例2" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1246" y="90" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-42" target="L0zeIL_IlN0LuXFVjX9a-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-42" value="Thread实例" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1116" y="307.5" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-43" target="L0zeIL_IlN0LuXFVjX9a-58">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-43" value="ThreadLocalMap" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1246" y="307.5" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-54" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1306" y="162.5" width="260" height="110" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-44" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FF9933;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1316" y="192.5" width="70" height="70" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-45" value="key" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#80FF00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1326" y="202.5" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-47" value="value" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1326" y="232.5" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-48" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FF9933;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1396" y="192.5" width="70" height="70" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-49" value="key" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#80FF00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1406" y="202.5" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-50" value="value" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1406" y="232.5" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-51" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FF9933;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1476" y="192.5" width="70" height="70" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-52" value="key" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#80FF00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1486" y="202.5" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-53" value="value" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1486" y="232.5" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-55" value="Entity" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1321" y="167.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-56" value="Entity" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1400" y="167.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-57" value="Entity" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1481" y="167.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-58" target="L0zeIL_IlN0LuXFVjX9a-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-58" value="Entity[] = table&amp;nbsp; &amp;nbsp;用数组存储，对key哈希取模放入数组index中" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1376" y="312.5" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-61" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-35" target="L0zeIL_IlN0LuXFVjX9a-45">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1196" y="217.5" as="sourcePoint" />
            <mxPoint x="1246" y="167.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-62" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-49" target="L0zeIL_IlN0LuXFVjX9a-41">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1456" y="142.5" as="sourcePoint" />
            <mxPoint x="1506" y="92.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-63" value="如果线程里有多个 new ThreadLocal() 依次hash到数组里" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1346" y="127.5" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-68" value="INIT_V初始值" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#99FFCC;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1146" y="200" width="80" height="35" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-69" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-68" target="L0zeIL_IlN0LuXFVjX9a-47">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1216" y="292.5" as="sourcePoint" />
            <mxPoint x="1266" y="242.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-72" value="多数情况下，ThreadLocal会是多个静态实例在应用程序中" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3FF66;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1116" y="362.5" width="160" height="45" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-73" value="Heap堆" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1096" y="60" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-74" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#CCCC00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="896" y="282.5" width="150" height="130" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-75" value="线程1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="896" y="60.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-76" value="线程2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="896" y="287.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-78" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-77" target="L0zeIL_IlN0LuXFVjX9a-72">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-77" value="ThreadLocal&lt;div&gt;Ref&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="966" y="317.5" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-82" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-79" target="L0zeIL_IlN0LuXFVjX9a-80">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-79" value="线程2的Thread&lt;div&gt;Ref&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="961" y="362.5" width="85" height="35" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-80" target="L0zeIL_IlN0LuXFVjX9a-81">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-80" value="Thread实例2" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1116" y="422.5" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-81" value="ThreadLocalMap" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1246" y="422.5" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-84" value="每个线程对应不同的Thread实例，所以线程间是隔离的" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1356" y="432.5" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-85" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#CCCC00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="896" y="432.5" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-86" value="线程3" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="896" y="442.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-88" value="自动配置类" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1132" y="632.5" width="84" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-93" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-89" target="L0zeIL_IlN0LuXFVjX9a-90">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="980" y="730" />
              <mxPoint x="980" y="730" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-157" value="@Bean" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];shadow=1;" vertex="1" connectable="0" parent="L0zeIL_IlN0LuXFVjX9a-93">
          <mxGeometry x="-0.2" y="5" relative="1" as="geometry">
            <mxPoint y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-89" target="L0zeIL_IlN0LuXFVjX9a-92">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1226" y="820" />
              <mxPoint x="1226" y="820" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-156" value="@Bean" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];shadow=1;" vertex="1" connectable="0" parent="L0zeIL_IlN0LuXFVjX9a-96">
          <mxGeometry x="-0.5727" y="2" relative="1" as="geometry">
            <mxPoint y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-117" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-89" target="L0zeIL_IlN0LuXFVjX9a-91">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1131" y="740" />
              <mxPoint x="1131" y="740" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-155" value="@Bean" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];shadow=1;" vertex="1" connectable="0" parent="L0zeIL_IlN0LuXFVjX9a-117">
          <mxGeometry x="-0.2611" y="2" relative="1" as="geometry">
            <mxPoint y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-89" value="NacosServiceRegistryAutoConfiguration" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#66FF66;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="926" y="700" width="340" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-120" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-90" target="L0zeIL_IlN0LuXFVjX9a-121">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="980" y="1160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-159" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-90" target="L0zeIL_IlN0LuXFVjX9a-113">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="980" y="1015" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-160" value="对应的&lt;span style=&quot;text-wrap: wrap; font-size: 12px; background-color: rgb(251, 251, 251);&quot;&gt;serviceRegistry&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];shadow=1;" vertex="1" connectable="0" parent="L0zeIL_IlN0LuXFVjX9a-159">
          <mxGeometry x="-0.1154" y="-1" relative="1" as="geometry">
            <mxPoint x="35" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-90" value="NacosServiceRegistry" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="907" y="770" width="146" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-115" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-91" target="L0zeIL_IlN0LuXFVjX9a-113">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1040" y="850" />
              <mxPoint x="1040" y="1000" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-116" value="对应getRegistration" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];shadow=1;" vertex="1" connectable="0" parent="L0zeIL_IlN0LuXFVjX9a-115">
          <mxGeometry x="0.1639" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-91" value="NacosRegistration" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1058" y="830" width="146" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-161" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-92" target="L0zeIL_IlN0LuXFVjX9a-99">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-162" value="继承" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];shadow=1;" vertex="1" connectable="0" parent="L0zeIL_IlN0LuXFVjX9a-161">
          <mxGeometry x="-0.4873" relative="1" as="geometry">
            <mxPoint y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-92" value="NacosAutoServiceRegistration" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1136" y="930" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-98" value="依赖上面两个bean" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1094" y="900" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-106" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-99" target="L0zeIL_IlN0LuXFVjX9a-103">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-99" value="AbstractAutoServiceRegistration" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1396" y="760" width="199" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-100" value="ApplicationListener&lt;div&gt;&amp;lt;WebServerInitializedEvent&amp;gt;&lt;/div&gt;" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1402" y="690" width="188" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-102" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-99" target="L0zeIL_IlN0LuXFVjX9a-100">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1604" y="810" as="sourcePoint" />
            <mxPoint x="1654" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-107" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-103" target="L0zeIL_IlN0LuXFVjX9a-104">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-103" value="onApplicationEvent" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1433.5" y="820" width="124" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-104" target="L0zeIL_IlN0LuXFVjX9a-105">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-104" value="start" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1471.5" y="870" width="48" height="20" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-114" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-105" target="L0zeIL_IlN0LuXFVjX9a-113">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-105" value="register" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1464" y="930" width="64" height="20" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-122" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;edgeStyle=orthogonalEdgeStyle;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-113" target="L0zeIL_IlN0LuXFVjX9a-121">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-113" value="this.serviceRegistry.register(getRegistration())&lt;div&gt;交给子类实现&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1362" y="970" width="268" height="60" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-127" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-121" target="L0zeIL_IlN0LuXFVjX9a-126">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-121" value="register" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="945" y="1060" width="70" height="21" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-158" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-123" target="L0zeIL_IlN0LuXFVjX9a-129">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-123" value="NamingService.registerInstance&lt;div&gt;(服务名, 组名, 注册实例)&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="878" y="1191" width="204" height="50" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-128" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-126" target="L0zeIL_IlN0LuXFVjX9a-123">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-126" value="实例化NamingService" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#CCCC00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="914" y="1121" width="132" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-135" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-129" target="L0zeIL_IlN0LuXFVjX9a-132">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-129" target="L0zeIL_IlN0LuXFVjX9a-138">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-129" value="增加心跳信息" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1104.25" y="1201" width="85" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-131" value="if&amp;nbsp; isEphemeral()&lt;div&gt;AC模式-持久化实例&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1096" y="1161" width="121" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-147" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-132" target="L0zeIL_IlN0LuXFVjX9a-140">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-132" value="注册实例" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1106.75" y="1286" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-133" value="/instance" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#99FFCC;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1550.5" y="1286" width="89.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-143" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-138" target="L0zeIL_IlN0LuXFVjX9a-139">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-138" value="schedule(任务BeatTask)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FF9933;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1216" y="1198.5" width="150" height="35" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-144" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-139" target="L0zeIL_IlN0LuXFVjX9a-141">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-139" value="serverProxy.sendBeat" style="rounded=0;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1394" y="1201" width="134" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-148" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-140" target="L0zeIL_IlN0LuXFVjX9a-133">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-140" value="serverProxy.registerService" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#F19C99;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1335" y="1286" width="154" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-141" value="/instance/beat" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#99FFCC;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1550.5" y="1201" width="89.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-145" value="注意不是定时执行，而是根据服务的返回的period字段决定下次执行时间" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#FF9933;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1254" y="1151" width="206" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-146" value="如果在心跳过程中返回20404，触发重新注册实例&lt;div&gt;server.registerService&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=#F19C99;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1299.5" y="1241" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-151" value="springcloud的一套" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1365" y="645" width="111" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-153" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-152" target="L0zeIL_IlN0LuXFVjX9a-88">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-152" value="client启动&lt;div&gt;服务注册&lt;/div&gt;" style="ellipse;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="949.75" y="620" width="112.5" height="55" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-154" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.728;entryY=0.019;entryDx=0;entryDy=0;entryPerimeter=0;shadow=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-88" target="L0zeIL_IlN0LuXFVjX9a-89">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-163" value="实例化NamingService" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#CCCC00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="860" y="1584" width="132" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-164" value="cacheDir&lt;div&gt;是vm虚拟机或者用户目录下/nacos/&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="888" y="1654" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-168" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-165" target="L0zeIL_IlN0LuXFVjX9a-167">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-165" value="心跳线程" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1091" y="1554" width="104" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-166" value="udp接收" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1259" y="1714" width="74" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-170" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="L0zeIL_IlN0LuXFVjX9a-167" target="L0zeIL_IlN0LuXFVjX9a-169">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-167" value="ScheduledThreadPoolExecutor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1275" y="1554" width="182" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-169" value="发送心跳task" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1505" y="1554" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-172" value="failover&lt;div&gt;故障转移&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1259" y="1634" width="104" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-173" value="向本地cache目录写数据" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1386" y="1634" width="104" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-174" value="HostReactor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1101" y="1664" width="104" height="30" as="geometry" />
        </mxCell>
        <mxCell id="L0zeIL_IlN0LuXFVjX9a-175" value="创建udp socket接收服务端推送过来的数据" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1378.5" y="1724" width="149" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
